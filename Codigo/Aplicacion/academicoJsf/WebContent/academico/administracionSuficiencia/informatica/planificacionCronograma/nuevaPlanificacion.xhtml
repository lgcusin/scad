<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">
<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina" value="Administración suficiencias / Informatica / Nueva planificación " />
		</ui:include>
</ui:define>


<ui:define name="cuerpo">

<script language="JavaScript">
//<![CDATA[
	function verificarErrores(){
    	var idVarError = 'compOculto:txtValidador';
    	var varError = document.getElementById(idVarError);
    	if(varError.value == 1){
    		document.getElementById('frmNuevaPlanificacion:btnGenerarNuevoPeriodoAcademicoValidarModal').click();
        }
    	if(varError.value == 2){
    		document.getElementById('frmNuevaPlanificacion:btnEditarPeriodoAcademicoValidarModal').click();
        }
    } 
    function nobackbutton(){
   		window.location.hash="no-back-button";
   		window.location.hash="Again-No-back-button" //chrome
   		window.onhashchange=function(){window.location.hash="no-back-button";}
	}
    
 //]]> 
</script>

	<h:form id="frmNuevaPlanificacion" enctype="multipart/form-data" acceptcharset="UTF-8">
	
		<p:panel id="pnlDatos" header="Información del Grupo académico" >
			<div class="grid condensed">
			
				<div class="row cells8">
					<div class="cell colspan4">
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblModalidad" for="slcModalidad" value="Modalidad:" />	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<h:selectOneMenu id="slcModalidad" 	value="#{administracionPlanificacionCronogramaForm.apcfModalidadId}" 
		       						style="width:100%"> 
		       						<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}"  itemValue="#{generalesConstantesForm.appIdBase}"/> 
									<f:selectItems  var="item" value="#{administracionPlanificacionCronogramaForm.apcfListModalidadDto}" 
										itemLabel="#{item.mdlDescripcion}" 
										itemValue="#{item.mdlId}" />
									<p:ajax event="change"  update="pnlDatos , :frmNuevaPlanificacion:pnlCronograma" listener="#{administracionPlanificacionCronogramaForm.generarCodigoPeriodoInformatica()}" />         
								</h:selectOneMenu>	
		       				</ui:define>
		       			</ui:decorate>
		       		</div>
		    	</div>
			
		         <div class="row cells8">
		        	 <div class="cell colspan4">
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblDescripcion" for="txtDescripcion" value="Período:"/>
		       				</ui:define>
		       				<ui:define name="valor">	
								<p:outputLabel id="txtDescripcion" value="#{administracionPlanificacionCronogramaForm.apcfPlanificacionCronogramaDto.plcrPeriodoAcademicoDto.pracDescripcion}"
									style="vertical-align: super;font-weight: Normal !important; width:100%" />
		       				</ui:define>
		       			</ui:decorate>
		       		 </div>
		        	 <div class="cell colspan4">
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblEstado" value="Estado:" />	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:outputLabel id="slcEstado" value="#{administracionPlanificacionCronogramaForm.etiquetarPeriodoAcademicoEstados(administracionPlanificacionCronogramaForm.apcfPlanificacionCronogramaDto.plcrPeriodoAcademicoDto.pracEstado)}" 
		       						style="vertical-align: super;font-weight: Normal !important; width:100%" />	
		       				</ui:define>
		       			</ui:decorate>
		       		 </div>
		    	</div>
		    	
		    	<div class="row cells8">
					<div class="cell colspan4">
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFechaInicio" for="txtFechaInicio" value="Inicio:"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
								<p:calendar  id="txtFechaInicio" value="#{administracionPlanificacionCronogramaForm.apcfPlanificacionCronogramaDto.plcrPeriodoAcademicoDto.pracFechaIncio}" 
		       						effect="fold"
									readonlyInput="true"
									pattern="dd-MM-yyyy">
									<p:ajax event="dateSelect" update="pnlDatos , pnlCronograma" />
								</p:calendar>
		       				</ui:define>
		       			</ui:decorate>
					</div>
					<div class="cell colspan4">
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFechaFin" for="txtFechaFin" value="Fin:"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:calendar  id="txtFechaFin" value="#{administracionPlanificacionCronogramaForm.apcfPlanificacionCronogramaDto.plcrPeriodoAcademicoDto.pracFechaFin}" 
		       						effect="fold"
									readonlyInput="true"
									pattern="dd-MM-yyyy">
									<p:ajax event="dateSelect" update="pnlDatos , pnlCronograma" />
								</p:calendar>
		       				</ui:define>
		       			</ui:decorate>
					</div>
				</div>
				
		    </div>
		</p:panel>
		
		<p:panel id="pnlCronograma" header="Planificación de Crongramas" >

				<p:dataTable id="dtsCronograma" var="item" value="#{administracionPlanificacionCronogramaForm.apcfListPlanificacionCronogramaDto}"
					rowIndexVar="rowIndex"
					rows="20" paginator="true"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="5,10,15"
					emptyMessage="NO SE ENCONTRARON DATOS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS">
					
					<p:column headerText="#" style="width: 0.1em ! important; text-align: center;">
						<h:outputText value="#{rowIndex+1}" />
					</p:column>
					<p:column headerText="Descripción"	style="width: 15%; text-align:left;">
						<h:outputText value="#{item.plcrProcesoFlujoDto.prflDescripcion}" />
					</p:column>
					<p:column headerText="Inicio" style="width: 15%; text-align:center;">
						<p:calendar id="slcInicial" value="#{item.plcrFechaInicial}" 
		       						effect="fold"
		       						style="text-align:right !important;"
									readonlyInput="true"
									pattern="dd-MM-yyyy HH:mm:ss">
							<p:ajax event="dateSelect" update="slcInicial" />
						</p:calendar>
					</p:column>
					<p:column headerText="Fin" style="width: 15%; text-align:center;">
						<p:calendar id="slcFinal" value="#{item.plcrFechaFinal}" 
		       						effect="fold"
		       						style="text-align:right !important;"
									readonlyInput="true"
									pattern="dd-MM-yyyy HH:mm:ss">
							<p:ajax event="dateSelect" update="slcFinal" />
						</p:calendar>
					</p:column>
					<p:column headerText="Estado"	style="width: 15%; text-align:center;">
						<h:outputText value="#{administracionPlanificacionCronogramaForm.etiquetarPlanificacionCronoramaEstados(item.plcrEstado)}" />
					</p:column>
				</p:dataTable>
			</p:panel>
			
			
		<div >
			<p:commandButton id="btnCancelar" action="#{administracionPlanificacionCronogramaForm.irCronogramasInformatica()}" value="Cancelar" immediate="true" ajax="false"/>
			<p:commandButton id="btnGuardar" value="Guardar" 
				action="#{administracionPlanificacionCronogramaForm.habilitarModalCrearNuevaPlanificacion()}"
				ajax="false"/>
			<p:commandButton id="btnGenerarNuevoPeriodoAcademicoValidarModal" value="EjecutarModalNuevoPeriodoAcademico" style="visibility:hidden;">
	    		<p:ajax oncomplete="PF('dialogoGuardarNuevo').show();" update=":frmModalGuardarNuevo" />
	    	</p:commandButton>
		</div>
		
	</h:form>
	
	<ui:include src="/academico/administracionSuficiencia/informatica/planificacionCronograma/modalGuardar.xhtml" />
	
	<h:form id="compOculto" style="visibility:hidden;">
	 	<p:inputText id="txtValidador" value="#{administracionPlanificacionCronogramaForm.apcfActivarModal}" />
	</h:form>
	
</ui:define>
</ui:composition>     
</html>
