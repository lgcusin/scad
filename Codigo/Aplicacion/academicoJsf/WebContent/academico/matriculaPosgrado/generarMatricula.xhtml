<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">
<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
				value=" Matrículas / Listar Matrículas / Generar Matrícula" />
		</ui:include>
</ui:define>
<ui:define name="cuerpo">
<script language="JavaScript">
//<![CDATA[
	function verificarErrores(){
    	var idVarError = 'compOculto:txtValidador';
    	var varError = document.getElementById(idVarError);
    	if(varError.value == 1){
    		document.getElementById('frmMateriasPosgrado:btnGenerarMatriculaValidarModal').click();
        }
    } 

 //]]> 
</script>
	<h:form id="frmMateriasPosgrado" enctype="multipart/form-data" acceptcharset="UTF-8" >
		<!-- ******************** PANEL RESULTADOS DE BÚSQUEDA************************ -->
		<p:panel id="pnlResultados" header="Materias disponibles para matricularse">
			<p:dataTable id="dtsMateria" var="itemMateria" value="#{fichaGenerarMatriculaPosgradoForm.fgmpfListMateriaDto}"
		   		 		rows="15" paginator="true" paginatorPosition="bottom"
	                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	                         rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON REGISTROS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS"
	                          style="text-align: center;">
	                <p:column headerText="Asignatura"  style="width: 30em  ! important; text-align: left; ">
			            <h:outputText value="#{itemMateria.mtrDescripcion}"/>
			        </p:column>
			        <p:column headerText="Nivel"  style="width: 1em  ! important;">
			            <h:outputText value="#{itemMateria.nvlDescripcion}"/>
			        </p:column>
			        <p:column headerText="Paralelo"  style="width: 5em  ! important;" rendered="false" >
			           <h:selectOneMenu id="slcParalelo" value="#{itemMateria.mlcrprId}" disabled="true"
									required="false" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"
									style="width:100%">
							<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}" itemValue="#{generalesConstantesForm.appIdBase}" />
							<f:selectItems var="itemParalelo"  value="#{itemMateria.listParalelos}"
										itemLabel="#{itemParalelo.prlDescripcion}" itemValue="#{itemParalelo.mlcrprId}" />
						</h:selectOneMenu>
			        </p:column>
			         <p:column headerText="Seleccionar" style="width: 1em  ! important;  " rendered="false">
							<h:selectBooleanCheckbox value="#{itemMateria.isSeleccionado}" disabled="true" >
								<p:ajax event="change" update="slcParalelo" />
							</h:selectBooleanCheckbox>
			        </p:column>
				</p:dataTable>
		</p:panel>
		<div>
			<p:commandButton id="btnCancelar" value="Cancelar"  action="#{fichaGenerarMatriculaPosgradoForm.cancelarGenerarMatricula()}" immediate="true" ajax="false" />
			<p:commandButton id="btnGenerarMatricula" action="#{fichaGenerarMatriculaPosgradoForm.verificarClickGenerarMatricula()}" value="Generar Matrícula"  ajax="false" />
			<p:commandButton id="btnGenerarMatriculaValidarModal" value="EjecutarModalGenerar" style="visibility:hidden;">
    				<p:ajax oncomplete="PF('dialogoGenerarMatricula').show();" update=":frmModalGenerarMatricula" />
    		</p:commandButton>
		</div>
	</h:form>
	<ui:include src="/academico/matriculaPosgrado/modalGenerarMatricula.xhtml" />
	
	<h:form id="compOculto" style="visibility:hidden;">
	 	<p:inputText id="txtValidador" value="#{fichaGenerarMatriculaPosgradoForm.fgmpfValidadorClic}" >
		</p:inputText>	
	</h:form>
	
</ui:define>
</ui:composition>
</html>