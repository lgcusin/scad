<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
    xmlns:H="http://xmlns.jcp.org/jsf/html">
	<h:form id="frmModalAgregarCarrera">
		<p:dialog id="dlgAgregarCarrera" widgetVar="dlgModalAgregarCarrera" height="500" width="800"
			modal="true" 
			draggable="false" 
			closable="false" 
			resizable="false" 
			styleClass="modal-sin-header">
			
			<p:outputLabel value="Asignar carrera"  style="font-size: 1.1em !important;" />
			
			<p:messages autoUpdate="true" globalOnly="true" />
			
			<p:panel id="pnlBusquedaCarrera" header="Ingrese los datos para buscar">
				<div class="grid condensed">
				
					<div class="row cells8">
						<div class="cell colspan4">
							<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
								<ui:define name="etiqueta">
									<p:outputLabel id="lblFacultad" for="slcFacultad" value="Facultad: " />
								</ui:define>
								<ui:define name="valor">
									<h:selectOneMenu id="slcFacultad" 
										value="#{actualizacionDocenteForm.adfDependenciaId}"
										style="width: 100%;">
										<f:selectItem
											itemLabel="#{generalesConstantesForm.appSeleccione}"
											itemValue="#{generalesConstantesForm.appIdBase}" />
										<f:selectItems 
											var="item" 
											value="#{actualizacionDocenteForm.adfListDependencia}"
											itemLabel="#{item.dpnDescripcion}"
											itemValue="#{item.dpnId}" />
										<p:ajax 
											event="change"
											update=":frmModalAgregarCarrera:pnlBusquedaCarrera :frmModalAgregarCarrera:pnlResultadosCarrera" />
									</h:selectOneMenu>
								</ui:define>
							</ui:decorate>
						</div>
					</div>
					
					
				</div>
			</p:panel>
			
			<div>
				
			<p:commandButton 
				id="btnBuscarCarrera"
				action="#{actualizacionDocenteForm.buscarCarreras()}"
				value="Buscar"
				update=":frmModalAgregarCarrera:pnlResultadosCarrera :frmModalAgregarCarrera:pnlBusquedaCarrera" />
			<p:commandButton 
				id="btnLimpiarCarrera" 
				action="#{actualizacionDocenteForm.limpiarModalAgregarCarrera()}"
				value="Limpiar" 
				update=":frmModalAgregarCarrera:pnlResultadosCarrera :frmModalAgregarCarrera:pnlBusquedaCarrera" /> 
			</div>
		
			<p:panel id="pnlResultadosCarrera" header="Resultados de la búsqueda" >
				<p:dataTable id="tblDependencia" var="item"
					value="#{actualizacionDocenteForm.adfListCarrera}"
					rows="5" paginator="true"
		            paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		            rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON DATOS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS" paginatorPosition="bottom">
				        <p:column headerText="Código" style="width: 1em ! important; text-align:center">
				            <h:outputText value="#{item.crrId}"/>
				        </p:column>
				        <p:column headerText="Descripción" style="width: 5em ! important; text-align:left">
				            <h:outputText value="#{item.crrDescripcion}"/>
				        </p:column>
				        <p:column headerText="Opción" style="width: 1em ! important;" class="border-none">
				        	<p:commandLink 
				        		value="Asignar" 
				        		action="#{actualizacionDocenteForm.establecerCarrera(item)}"
				        		onclick="PF('dialogoTrabajando').show();" 
					        	update=":frmModalAgregarCarrera:pnlResultadosCarrera :frmModalAgregarCarrera:pnlBusquedaCarrera"
				        		ajax="false" 
				        		style="color:blue;"/>
				        </p:column>
				</p:dataTable>
			</p:panel>
			
			<div>
				<p:commandButton
					id="btnCancelar" 
					value="Cancelar" 
					action="#{actualizacionDocenteForm.limpiarModalAgregarCarrera()}"
					onclick="PF('dlgModalAgregarCarrera').hide();"/>
			</div>
			
		</p:dialog> 
	</h:form>
</ui:composition>