<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<ui:composition
	template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">
	<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
			value="Administración / Posgrado / Crear programa" />
				
		</ui:include>
	</ui:define>


	<ui:define name="cuerpo">

		<script language="JavaScript">
//<![CDATA[
	function verificarErrores(){ 
    	var idVarError = 'compOculto:txtValidador';
    	var varError = document.getElementById(idVarError);
    	if(varError.value == 1){ 
    		document.getElementById('frmNuevoPrograma:btnGenerarNuevoProgramaValidarModal').click();
    	}
    	
    	  //   if(varError.value == 2){
         //		document.getElementById('frmNuevoParalelo:btnEditarParaleloValidarModal').click();
         //   }
    } 
    
    function nobackbutton(){
   		window.location.hash="no-back-button";
   		window.location.hash="Again-No-back-button" //chrome
   		window.onhashchange=function(){window.location.hash="no-back-button";}
	}
    
 //]]> 
</script>

		<h:form id="frmNuevoPrograma" enctype="multipart/form-data" acceptcharset="UTF-8">
				
			<!-- *************************************************************************************************** -->
			<!-- **********************************PANEL IDENTIFICACION DEL PUESTO********************************** -->
			<p:panel id="pnlDatos" header="Datos de la Cohorte">
				<!-- ******************** TABLA RESPONSIVA ************************ -->
				<div class="grid condensed" >
					<div class="row cells8"> 
							<div class="cell colspan4" >       
								<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
									<ui:define name="etiqueta">
										<p:outputLabel id="lblDependencia" for="slcDependencia" value="Facultad: " />
									</ui:define>
									<ui:define name="valor">
										<h:selectOneMenu id="slcDependencia" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.dpnId}" style="width: 100%;" required="true"
														requiredMessage="#{generalesConstantesForm.msgCampoRequerido}">		
											<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}" />
										  	<f:selectItems value="#{administracionProgramaPosgradoForm.appfListDependencia}" var="item"
													itemLabel="#{item.dpnDescripcion}" itemValue="#{item.dpnId}" />  
										</h:selectOneMenu>
									</ui:define>
									<ui:define name="etiquetaError">
										<p:message id="msgDependencia" for="slcDependencia" />
									</ui:define>
							    </ui:decorate>
						    </div>
					<div class="cell colspan4" >       
								<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
									<ui:define name="etiqueta">
										<p:outputLabel id="lblPrograma" for="slcPrograma" value="Programa: " />
									</ui:define>
									<ui:define name="valor">
										<h:selectOneMenu id="slcPrograma" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.crrId}" style="width: 100%;" required="true"
														requiredMessage="#{generalesConstantesForm.msgCampoRequerido}">		
											<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}" />
										  	<f:selectItems value="#{administracionProgramaPosgradoForm.appfListCarrera}" var="item"
													itemLabel="#{item.crrDescripcion}" itemValue="#{item.crrId}" />  
											<p:ajax listener="#{administracionProgramaPosgradoForm.cambiarCarrera()}" event="change" update="lblPrograma , msgPrograma , txtPracDetalle, pnlDatos , pnlResultados , pnlResultados , btnGuardarNuevoPrograma , slcNivel" />
										</h:selectOneMenu>
									</ui:define>
									<ui:define name="etiquetaError">
										<p:message id="msgPrograma" for="slcPrograma" />
									</ui:define>
							    </ui:decorate>
						    </div>
				</div> <!-- Fin fila 1 -->
					<!-- ******************** FILA NUMERO 1 ************************ -->
				<div class="row cells8"> 
					
					<div class="cell colspan4" > 
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblPracDetalle" for="txtPracDetalle" value="Años de la cohorte (aaaa - aaaa): " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:inputMask mask="9999 - 9999" id="txtPracDetalle" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.pracDetalleFechaCohorte}" 
 								 required="true"	requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"   style="width: 100%;" maxlength="11"
 								 disabled="#{administracionProgramaPosgradoForm.appfValidadorPrograma}"> 
 								<p:ajax event="blur" listener="#{administracionProgramaPosgradoForm.llenarPracDescripcion()}"  
 								update="lblPracDetalle , txtPracDetalle , msgPracDetalle , lblPracDescripcion , txtPracDescripcion " /> 
 								</p:inputMask>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgPracDetalle" for="txtPracDetalle" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
				   	<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblPracDescripcion" for="txtPracDescripcion" value="Descripción de la cohorte: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:outputLabel id="txtPracDescripcion" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.pracDescripcion}" /> 
 							</ui:define>
						</ui:decorate> 
				   	</div> 
				</div> <!-- Fin fila 2 -->
				<div class="row cells8"> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblTtlDescripcion" for="txtTtlDescripcion" value="Titulo que otorga el programa: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:inputText id="txtTtlDescripcion" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.ttlDescripcion}" 
 								 required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"   style="width: 100%;"
 								 disabled="#{administracionProgramaPosgradoForm.appfProgramaExiste}"> 
 								<p:ajax event="blur" listener="#{administracionProgramaPosgradoForm.llenarConfiguracionCarrera()}"  
 								update="lblTtlDescripcion , txtTtlDescripcion , msgTtlDescripcion" /> 
 								</p:inputText>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgTtlDescripcion" for="txtTtlDescripcion" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
							<div class="cell colspan4" >       
								<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
									<ui:define name="etiqueta">
										<p:outputLabel id="lblNivel" for="slcNivel" value="Número de niveles del programa: " />
									</ui:define>
									<ui:define name="valor">
										<h:selectOneMenu id="slcNivel" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.niveles}" style="width: 100%;" required="true"
														requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" disabled="#{administracionProgramaPosgradoForm.appfProgramaExiste}">		
											<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}" />
										  	<f:selectItems value="#{listasCombosForm.listaNivelesPosgrado}" var="item"
													itemLabel="#{item.label}" itemValue="#{item.value}" />  
													<p:ajax event="change"   listener="#{administracionProgramaPosgradoForm.llenarNucleoProblemico()}"
                                                   update="lblNivel , slcNivel , msgNivel" />
										</h:selectOneMenu>
									</ui:define>
									<ui:define name="etiquetaError">
										<p:message id="msgNivel" for="slcNivel" />
									</ui:define>
							    </ui:decorate>
						    </div>
				</div> <!-- Fin fila 3 -->	
 				<div class="row cells8"> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaInicio" for="txtFechaInicio" value="Fecha inicio de matrículas: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaInicio" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.plcrFechaInicioOrdinaria}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida">
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="1" />
								</p:calendar>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgfechaInicio" for="txtFechaInicio" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaFin" for="txtFechaFin" value="Fecha fin de matrículas: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaFin" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.plcrFechaFinOrdinaria}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida">
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="2" />
								</p:calendar>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgFechaFin" for="txtFechaFin" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
				</div> <!-- Fin fila 4 -->		 
 				<div class="row cells8"> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaInicioExtra" for="txtFechaInicioExtra" value="Fecha inicio de matrículas extraordinarias: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaInicioExtra" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.plcrFechaInicioExtra}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida">
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="3" />
								</p:calendar>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgFechaInicioExtra" for="txtFechaInicioExtra" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaFinExtra" for="txtFechaFinExtra" value="Fecha fin de matrículas extraordinarias: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaFinExtra" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.plcrFechaFinExtra}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida">
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="4" />
								</p:calendar> 
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgFechaFinExtra" for="txtFechaFinExtra" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
				</div> <!-- Fin fila 5 -->			
 				<div class="row cells8"> 
					<div class="cell colspan4" > 
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaInicioPrograma" for="txtFechaInicioPrograma" value="Fecha inicio de la cohorte: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaInicioPrograma" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.pracFechaIncio}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida">
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="5" />
								</p:calendar>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgFechaInicioPrograma" for="txtFechaInicioPrograma" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaFinPrograma" for="txtFechaFinPrograma" value="Fecha fin de la cohorte: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaFinPrograma" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.pracFechaFin}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida" >
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="6" />
								</p:calendar> 
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgFechaFinPrograma" for="txtFechaFinPrograma" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
				</div> <!-- Fin fila 5 -->
				<div class="row cells8"> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblMlcrDescripcion" for="txtMlcrDescripcion" value="Nombre de la malla curricular: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:inputText id="txtMlcrDescripcion" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.mlcrDescripcion}" 
 								 required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"   style="width: 100%;"
 								 disabled="#{administracionProgramaPosgradoForm.appfProgramaExiste}"> 
 								</p:inputText>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgMlcrDescripcion" for="txtMlcrDescripcion" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblMlcrCodigo" for="txtMlcrCodigo" value="Código de la malla curricular: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:inputText id="txtMlcrCodigo" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.mlcrCodigo}" 
 								 required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"   style="width: 100%;"
 								 disabled="#{administracionProgramaPosgradoForm.appfProgramaExiste}"> 
 								</p:inputText>
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgMlcrCodigo" for="txtMlcrCodigo" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div>
				</div> <!-- Fin fila 6 -->	
				<div class="row cells8"> 
					<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaInicioMalla" for="txtFechaInicioMalla" value="Fecha inicio de la malla: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaInicioMalla" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.mlcrFechaInicio}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida" disabled="#{administracionProgramaPosgradoForm.appfProgramaExiste}">
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="6" />
								</p:calendar> 
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgFechaInicioMalla" for="txtFechaInicioMalla" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
						<div class="cell colspan4" >  
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
								<p:outputLabel id="lblFechaFinMalla" for="txtFechaFinMalla" value="Fecha fin de la malla: " /> 
							</ui:define> 
 							<ui:define name="valor"> 
 								<p:calendar id="txtFechaFinMalla" value="#{administracionProgramaPosgradoForm.programaPosgradoDto.mlcrFechaFin}" 
 								 mindate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
 								 converterMessage="Ingresar una fecha válida" disabled="#{administracionProgramaPosgradoForm.appfProgramaExiste}">
										<f:attribute name="estudiante" value="#{administracionProgramaPosgradoForm.programaPosgradoDto}" />
										<f:attribute name="tipoFecha" value="6" />
								</p:calendar> 
 							</ui:define>
							<ui:define name="etiquetaError"> 
								<p:message id="msgFechaFinMalla" for="txtFechaFinMalla" /> 
 							</ui:define> 
						</ui:decorate> 
				   	</div> 
				</div> <!-- Fin fila 6 -->			
			</div>
			<div class="row cells8">
					<div class="cell colspan4"><!-- Carga archivo -->
					<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml"> 
 							<ui:define name="etiqueta"> 
 							<p:outputLabel id="lblArchivo"  /> 
							</ui:define> 
 							<ui:define name="valor"> 
						<p:fileUpload id="flupArchivoSubir"  
							fileUploadListener="#{administracionProgramaPosgradoForm.handleFileUpload}"  mode="advanced"
							sizeLimit="1572864" allowTypes="/(\.|\/)(xlsx)$/"
							fileLimit="5" update="pnlResultados , flupArchivoSubir , btnGuardarNuevoPrograma"
							fileLimitMessage="Máximo 5 intentos válidos"
							invalidSizeMessage="Tamaño de archivo excedido! máximo 1.5 Mb" 
							uploadLabel="Cargar" cancelLabel="Cancelar" disabled="#{administracionProgramaPosgradoForm.appfProgramaExiste}"
							label="Seleccione el archivo de asignaturas" invalidFileMessage="Tipo de archivo no válido! solo formato XLSX"
							dragDropSupport="false"
							style="width:100%"   />	
							</ui:define>
							</ui:decorate> 											
					</div>
				</div>											
					
			</p:panel>
			<p:panel id="pnlResultados" header="Materias a crear" >
				<p:dataTable id="dtsAsignaturas" var="item"
					value="#{administracionProgramaPosgradoForm.programaPosgradoDto.listaMateriaDto}" rows="10"
					paginator="true" paginatorPosition="bottom"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="5,10,15"
					emptyMessage="NO EXISTEN ASIGNATURAS INGRESADAS AL PROGRAMA">
					<p:column headerText="Nivel" style="width: 3em ! important;">
						<h:outputText value="#{item.nvlId}" />
					</p:column>
					<p:column headerText="Asignatura" style="width: 14em ! important;">
						<h:outputText value="#{item.mtrDescripcion}" />
					</p:column>
					<p:column headerText="Código" style="width: 4em ! important;">
						<h:outputText value="#{item.mtrCodigo}" />
					</p:column>
				</p:dataTable>
			</p:panel>
			<div>
				<p:commandButton id="btnRegresar" value="Cancelar" immediate="true" ajax="false" action="#{administracionProgramaPosgradoForm.irInicio()}" />
			
					<p:commandButton id="btnGuardarNuevoPrograma" value="Guardar configuración de programa" action="#{administracionProgramaPosgradoForm.verificarClickNuevoPrograma()}"
									ajax="false" disabled="#{administracionProgramaPosgradoForm.appfValidadorGuardar}"/>
					
												
			
			 	  <p:commandButton id="btnGenerarNuevoProgramaValidarModal" value="EjecutarModalNuevoPrograma" style="visibility:hidden;">
					<p:ajax oncomplete="PF('dialogoGuardarNuevo').show();" update=":frmModalGuardarNuevo" />
				    </p:commandButton>  
				    
			</div>
		</h:form>

		    <ui:include	src="/academico/administracionPosgrado/modalGuardarNuevo.xhtml" />
		    
  
       <h:form id="compOculto" style="visibility:hidden;">
			<p:inputText id="txtValidador" value="#{administracionProgramaPosgradoForm.appfValidadorClick}">
			</p:inputText> 
		</h:form>
		
	
		</ui:define>	
</ui:composition>

</html>
