<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      			xmlns:ui="http://java.sun.com/jsf/facelets"
      			xmlns:f="http://java.sun.com/jsf/core"
      			xmlns:h="http://java.sun.com/jsf/html"
     			xmlns:p="http://primefaces.org/ui">
     			
	<h:form id="frmModalBusqueda"> 
		<p:dialog id="dialogoBusqueda" widgetVar="dlgModalBusqueda" height="500" width="800"
			modal="true" 
			draggable="false" 
			closable="false" 
			resizable="false" 
			styleClass="modal-sin-header">
			
			<p:outputLabel value="Búsqueda para estudiantes que no estan registrados en el SIIU"  style="font-size: 1.1em !important;" />
			
			<p:messages autoUpdate="true" globalOnly="true" />
			
			<p:panel id="pnlBusqueda" header="Ingrese los datos para buscar">
				<div class="grid condensed">
			
		       	<div class="row cells8">
		     		<div class="cell colspan4" >
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblApellidoPaterno" for="txtApellidoPaterno" value="Primer apellido:"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtApellidoPaterno" value="#{historialAcademicoInactivasForm.haifPrimerApellido}"	style="width:100%">
		       						<p:ajax event="blur" listener="#{historialAcademicoInactivasForm.busquedaPorApellido()}" update="txtIdentificacion, lblIdentificacion" />
								</p:inputText>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		       	<div class="row cells8">
		     		<div class="cell colspan4" >
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblIdentificacion" for="txtIdentificacion" value="Identificación:"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtIdentificacion" value="#{historialAcademicoInactivasForm.haifIdentificacion}" style="width:100%">
		       						<p:ajax event="blur" listener="#{historialAcademicoInactivasForm.busquedaPorIdentificacion()}" update="lblApellidoPaterno, txtApellidoPaterno" />
								</p:inputText>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		    	
		   	</div>
			</p:panel>
			
			<div>
				
			<p:commandButton 
				id="btnBuscarCarrera"
				value="Buscar"
				onclick="PF('dialogoTrabajando').show();" 
				oncomplete="PF('dialogoTrabajando').hide();"
				update=":frmModalBusqueda:pnlResultados :frmModalBusqueda:pnlBusqueda" />
			<p:commandButton 
				id="btnLimpiarCarrera" 
				action="#{historialAcademicoInactivasForm.limpiarFormEstudiantes()}"   
				value="Limpiar" 
				update=":frmModalBusqueda:pnlResultados :frmModalBusqueda:pnlBusqueda" /> 
			</div>
		
			<p:panel id="pnlResultados" header="Resultados de la búsqueda" >
				<p:dataTable id="tblDependencia" var="item"
					value="#{historialAcademicoInactivasForm.haifListPersona}"
					rows="5" paginator="true"
		            paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		            rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON DATOS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS" paginatorPosition="bottom">
				     <p:column headerText="#" style="width: 1em ! important; text-align: center;">
						<h:outputText value="#{rowIndex+1}" />
					</p:column>
					<p:column headerText="Identificación" style="width: 2em ! important; text-align: center;">
						<h:outputText value="#{item.prsIdentificacion}" />
					</p:column>
					<p:column headerText="Primer apellido" style="width: 3em ! important; text-align: left;">
						<h:outputText value="#{item.prsPrimerApellido}" />
					</p:column>
					<p:column headerText="Segundo apellido" style="width: 3em ! important;text-align: left;"> 
						<h:outputText value="#{item.prsSegundoApellido} " />
					</p:column>
					<p:column headerText="Nombres" style="width: 3em ! important;text-align: left;">
						<h:outputText value="#{item.prsNombres} " />
					</p:column>
				        <p:column headerText="Opción" style="width: 1em ! important;" class="border-none">
				        	<p:commandLink 
				        		value="Ver historial académico" 
				        		onclick="PF('dialogoTrabajando').show();"
								oncomplete="PF('dialogoTrabajando').hide();"
								action="#{historialAcademicoInactivasForm.irCarrerasEstudiante(item)}" ajax="false"/>
				       </p:column>
				</p:dataTable>
			</p:panel>
			
			<div>
				<p:commandButton
					id="btnCancelar" 
					value="Cancelar" 
					action="#{historialAcademicoInactivasForm.limpiarFormEstudiantes()}"   
					onclick="PF('dlgModalBusqueda').hide();"/>
			</div>
			
		</p:dialog> 
	</h:form>
</ui:composition>