<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">
<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
				value="Reportes / Notas " />
		</ui:include>
</ui:define>
<ui:define name="cuerpo">

<script language="JavaScript">
	//<![CDATA[
		  function verificarErrores(){
		    var idVarAgregar = 'compOculto:txtValidador';
		   	var varAgregar = document.getElementById(idVarAgregar);
			    	if(varAgregar.value == 1){
			  			document.getElementById('frmReporteNotas:cmdlModalReporte1').click();
			 	    }
			    	if(varAgregar.value == 2){
				  		document.getElementById('frmReporteNotas:cmdlModalReporte2').click();
				 	}
			    	if(varAgregar.value == 3){
				  		document.getElementById('frmReporteNotas:cmdlModalReporte3').click();
				 	}
			    	if(varAgregar.value == 4){
				  		document.getElementById('frmReporteNotas:cmdlModalReporte4').click();
				 	}
		  	    }
	//]]> 
</script>

<script language="JavaScript">
	//<![CDATA[
	    function abrirVentaReporte(formato, nombreReporte, tipo){
				var url = "/aplicacion/reportes";
				url = url + "?nombreJasper=" + nombreReporte;
				url = url + "&formato=" + formato;
				url = url + "&tipo=" + tipo;
				if(formato == 'vista'){
					var reportWindow = window.open(url);
					reportWindow.focus();
				}else{
					var reportWindow = window.open(url);
				}
		   } 
	 //]]> 
</script>
	<h:form id="frmReporteNotas" enctype="multipart/form-data" acceptcharset="UTF-8">
		<p:panel id="pnlResultados" header="Resultados de la búsqueda" >
			<p:dataTable id="dtsEstudiante" var="item" value="#{reporteNotasDocenteForm.arndfListParaleloBusq}"
			    		 		rows="10" paginator="true" paginatorPosition="bottom"
			                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			                         rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON REGISTROS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS">
			                         
					        <p:column headerText="Carrera" style="width: 8em ! important;">
					            <h:outputText value="#{item.crrDescripcion}"/>
					        </p:column>
					        <p:column headerText="Asignatura" style="width: 5em ! important;">
					            <h:outputText value="#{item.mtrDescripcion}"/>
					        </p:column>
					        <p:column headerText="Paralelo" style="width: 1em ! important; text-align:center">
					            <h:outputText value="#{item.prlDescripcion}"/>
					        </p:column>
					        <p:column headerText="Reportes Notas" style="width: 7em ! important; " >
					        	<table style="width:100%; border-color: #dddd">
					        		<tr>
									    <td style="width: 3em ! important; text-align:center">
									    	<p:commandLink id="reporte1parcial" value="1er Hemisemestre" action="#{reporteNotasDocenteForm.reporte1Hemi(item)}" style="margin: 0px 1px;" ajax="false"/>
									    </td>
									    <td style="width: 3em ! important; text-align:center">
									    	<p:commandLink id="reporte2parcial" value="2do Hemisemestre"  action="#{reporteNotasDocenteForm.reporte2Hemi(item)}" style="margin: 0px 1px;" ajax="false"/>
									    </td>
									    <td style="width: 3em ! important; text-align:center">
									    	<p:commandLink id="reporteRecuperacion" value="Recuperación"  action="#{reporteNotasDocenteForm.reporteRecuperacion(item)}" style="margin: 0px 1px;" ajax="false"/>
									    </td>
									    <td style="width: 3em ! important; text-align:center">
									    	<p:commandLink id="reporteFinal" value="Reporte Final"  action="#{reporteNotasDocenteForm.reporteNotasFinales(item)}" style="margin: 0px 1px;" ajax="false"/>
									    </td>
									   
									 </tr>
					        	</table>
					        </p:column>
				</p:dataTable>
		</p:panel>
		<div >
			<p:commandButton id="btnSalir" value="Regresar" action="#{reporteNotasDocenteForm.irInicio()}" />
			
			<p:commandButton id="cmdlModalReporte1" value="Imprimir reporte" style="visibility:hidden;">
					<p:ajax oncomplete="abrirVentaReporte('PDF','reporteNota1Hemi','REPORTE_NOTAS');" />
			</p:commandButton>
			<p:commandButton id="cmdlModalReporte2" value="Imprimir reporte" style="visibility:hidden;">
					<p:ajax oncomplete="abrirVentaReporte('PDF','reporteNota2Hemi','REPORTE_NOTAS_SEGUNDO_HEMI');" />
			</p:commandButton>	
			<p:commandButton id="cmdlModalReporte3" value="Imprimir reporte" style="visibility:hidden;">
					<p:ajax oncomplete="abrirVentaReporte('PDF','reporteNotaRecuperacion','REPORTE_RECUPERACION');" />
			</p:commandButton>
			<p:commandButton id="cmdlModalReporte4" value="Imprimir reporte" style="visibility:hidden;">
					<p:ajax oncomplete="abrirVentaReporte('PDF','reporteNotasFinales','REPORTE_NOTAS_FINALES');" />
			</p:commandButton>
		</div>
	</h:form>		
	<h:form id="compOculto" style="visibility:hidden;">
			<p:inputText id="txtValidador" value="#{reporteNotasDocenteForm.rndActivarReporte}" />
		</h:form>
</ui:define>
</ui:composition>
</html>