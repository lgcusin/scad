<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      			xmlns:ui="http://java.sun.com/jsf/facelets"
      			xmlns:f="http://java.sun.com/jsf/core"
      			xmlns:h="http://java.sun.com/jsf/html"
     			xmlns:p="http://primefaces.org/ui">
	<h:form id="frmModalSubirArchivo">
		<p:dialog widgetVar="dialogoModalSubirArchivo" modal="true" draggable="false" closable="false" 
				  resizable="false" height="400" width="1000" styleClass="modal-sin-header" >
			<p:outputLabel 
				value="Generar solicitud de apelación"
				style="font-size: 1.1em !important;" />
				
            <p:messages for="mensaje" autoUpdate="true" globalOnly="true" />
					
			<p:panel id="pnlResultados" header="Información">

				<div class="grid condensed" >
				<!-- ******************** FILA NUMERO 1 ************************ -->
				<div class="row cells8"> 
						    <div class="cell colspan4"><!--Dependencia de la materia -->
						 <ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
							<ui:define name="etiqueta">
								<p:outputLabel id="lblCodigoMateria" for="codigoMateria" value="Código: " />
							</ui:define>
							<ui:define name="valor">
								<p:outputLabel id="codigoMateria" value="#{apelacionTerceraMatriculaForm.atmfMateriaSeleccionada.mtrCodigo}" 
												style="vertical-align: super;font-weight: Normal !important; width:100%" update ="codigoMateria"/>
							</ui:define>
						 </ui:decorate>
					   </div>
						
				</div> <!-- Fin fila 1 -->
			
				<!-- ******************** FILA NUMERO 2 ************************ -->
				<div class="row cells8"> 
						
						<div class="cell colspan4"> <!--carrera de la materia -->
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
							<ui:define name="etiqueta">
								<p:outputLabel id="lblMateria" for="materia" value="Asignatura: " />
							</ui:define>
							<ui:define name="valor">
								<p:outputLabel id="materia" value="#{apelacionTerceraMatriculaForm.atmfMateriaSeleccionada.mtrDescripcion}" 
												style="vertical-align: super;font-weight: Normal !important; width:98%" update ="materia"/>
							</ui:define>
						</ui:decorate>
					    </div>
				</div> <!-- Fin fila 1 -->
				
					<!-- ******************** FILA NUMERO 3 ************************ -->
				<div class="row cells8">
					<div class="cell colspan4" ><!--  Estado de la materia a editar-->
								<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
									<ui:define name="etiqueta">
										<p:outputLabel id="lblCausal" for="slcCausal" value="Causal: " />
									</ui:define>
									<ui:define name="valor">
										<h:selectOneMenu id="slcCausal" value="#{apelacionTerceraMatriculaForm.atmfMateriaSeleccionada.cslId}" 
										                style="width: 100%;" required="true"
										               
														requiredMessage="#{generalesConstantesForm.msgCampoRequerido}">		
											<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}"
											              itemValue="#{generalesConstantesForm.appIdBase}" />
										  	<f:selectItems value="#{apelacionTerceraMatriculaForm.atmfListCausal}" var="item"
													itemLabel="#{item.cslDescripcion}" itemValue="#{item.cslId}" />  
											<p:ajax event="change" update="lblCausal, msgCausal" />
										</h:selectOneMenu>
									</ui:define>
									<ui:define name="etiquetaError">
										<p:message id="msgCausal" for="slcCausal" />
									</ui:define>
							    </ui:decorate>
						    </div>
 				</div>	<!-- Fin fila 1 -->
 				
 				<div class="row cells8">
						<div class="cell colspan4">
							<ui:decorate
								template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
								<ui:define name="etiqueta">
									<p:outputLabel id="lblArchivo" for="txtArchivo"
										value="Seleccione el archivo con la evidencia de la causal" />
								</ui:define>
								<ui:define name="valor">
									<p:outputLabel id="txtArchivo"
										value="#{apelacionTerceraMatriculaForm.atmfNombreArchivoAuxiliar}"
										style="font-weight: Normal !important;">
									</p:outputLabel>
									<p:fileUpload id="flupArchivoSubir"
										fileUploadListener="#{apelacionTerceraMatriculaForm.handleFileUpload}"
										auto="true" sizeLimit="1048576" allowTypes="/(\.|\/)(pdf)$/"
										update=":frmVerMaterias, txtArchivo" cancelLabel="Cancelar"
										fileLimitMessage="Ya ha seleccionado un archivo"
										invalidSizeMessage="Tamaño de archivo excedido! máximo 1mb"
										label="Buscar"
										invalidFileMessage="Tipo de archivo no válido! solo formato pdf"
										uploadLabel="Cargar"
										requiredMessage="Campo requerido">
									</p:fileUpload>
									
								</ui:define>
							</ui:decorate>
						</div>
					 	
						
						
					</div>	  	  
					
					
 					
 				
 					  	
			 </div>  <!-- Fin Grid Condensed --> 
			</p:panel>
       
       
     <div class="row cells8">
      
                 <p:commandButton 
					id="btnCerrarModal" 
					value="Cerrar"
					action="#{apelacionTerceraMatriculaForm.CancelarSubirArchivo()}"
					oncomplete="PF('dialogoModalSubirArchivo').hide();" 
					update=":frmVerMaterias, :frmVerMaterias:dtsMaterias"	  />
					
				<p:commandButton 
					id="btnGuardarSubirArchivo" 
					value="Cargar evidencia"
					action="#{apelacionTerceraMatriculaForm.guardarSubirArchivo(apelacionTerceraMatriculaForm.atmfMateriaSeleccionada)}"
					update=":frmVerMaterias"
				/>
		
		  
				
			
		</div>
			
		</p:dialog> 
	</h:form>
</ui:composition>