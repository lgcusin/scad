<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
    xmlns:H="http://xmlns.jcp.org/jsf/html">
    
	<h:form id="frmModalAgregarCoordinador">
	
		<p:dialog id="dlgAgregarCoordinador" widgetVar="dlgModalAgregarCoordinador" modal="true" draggable="false" closable="false" 
				  resizable="false" height="500" width="800" styleClass="modal-sin-header">
			
			<p:outputLabel value="Coordinador de Área"  style="font-size: 1.1em !important;" />
			
			<p:messages autoUpdate="true" globalOnly="true" />
			
			<p:panel id="pnlBusqueda" header="Ingrese los datos para buscar">
				<div class="grid condensed">
			
		       	<div class="row cells8">
		     		<div class="cell colspan4" >
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblApellidoPaterno" for="txtApellidoPaterno" value="Primer apellido:"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtApellidoPaterno" value="#{administracionEvaluacionDocenteForm.aefPrimerApellido}"	style="width:100%">
		       						<p:ajax event="keyup" listener="#{administracionEvaluacionDocenteForm.busquedaPorApellido()}" update="txtIdentificacion, lblIdentificacion" />
								</p:inputText>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		       	<div class="row cells8">
		     		<div class="cell colspan4" >
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblIdentificacion" for="txtIdentificacion" value="Identificación:"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtIdentificacion" value="#{administracionEvaluacionDocenteForm.aefIdentificacion}" style="width:100%">
		       						<p:ajax event="keyup" listener="#{administracionEvaluacionDocenteForm.busquedaPorIdentificacion()}" update="lblApellidoPaterno, txtApellidoPaterno" />
								</p:inputText>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		    	
		   	</div>
			</p:panel>
			
			<div>
				
			<p:commandButton 
				id="btnBuscarCarrera"
				value="Buscar"
				action="#{administracionEvaluacionDocenteForm.busquedaAvanzadaDocentes()}"
				onclick="PF('dialogoTrabajando').show();" 
				oncomplete="PF('dialogoTrabajando').hide();"
				update=":frmModalAgregarCoordinador:pnlResultados :frmModalAgregarCoordinador:pnlBusqueda" />
			<p:commandButton 
				id="btnLimpiarCarrera" 
				action="#{administracionEvaluacionDocenteForm.limpiarFormBusquedaCoord()}"   
				value="Limpiar" 
				update=":frmModalAgregarCoordinador:pnlResultados :frmModalAgregarCoordinador:pnlBusqueda" /> 
			</div>
		
			<p:panel id="pnlResultados" header="Resultados de la búsqueda" >
				<p:dataTable id="tblDependencia" var="item"
					value="#{administracionEvaluacionDocenteForm.aefListPersonaDto}"
					rows="5" paginator="true"
					rowIndexVar="rowIndex"
		            paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		            rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON DATOS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS" paginatorPosition="bottom">
				     <p:column headerText="#" style="width: 1em ! important; text-align: center;">
						<h:outputText value="#{rowIndex+1}" />
					</p:column>
					<p:column headerText="Identificación" style="width: 2em ! important; text-align: center;">
						<h:outputText value="#{item.prsIdentificacion}" />
					</p:column>
					<p:column headerText="Docente" style="width: 10em ! important; text-align: left;">
						<h:outputText value="#{item.prsPrimerApellido} #{item.prsSegundoApellido} #{item.prsNombres}"  />
					</p:column>
			        <p:column headerText="Opción" style="width: 1em ! important;" class="border-none">
				        	<p:commandLink 
				        		value="Asignar" 
				        		onclick="PF('dialogoTrabajando').show();"
								oncomplete="PF('dialogoTrabajando').hide();"
								update=":frmCoordinador"
								action="#{administracionEvaluacionDocenteForm.registrarCoordinadorElegido(item)}" ajax="false"/>
				       </p:column>
				</p:dataTable>
			</p:panel>
			
			<div>
				<p:commandButton
					id="btnCancelar" 
					value="Cancelar" 
					action="#{administracionEvaluacionDocenteForm.vaciarFormBusquedaCoord()}"   
					onclick="PF('dlgModalBusqueda').hide();"/>
			</div>

		</p:dialog> 
	</h:form>
</ui:composition>