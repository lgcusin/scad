<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">
<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
				value="Administración académico / Período Académico / #{administracionPeriodoAcademicoForm.apafPaginacionSt} " />
		</ui:include>
</ui:define>


<ui:define name="cuerpo">

<script language="JavaScript">
//<![CDATA[
	function verificarErrores(){
    	var idVarError = 'compOculto:txtValidador';
    	var varError = document.getElementById(idVarError);
    	if(varError.value == 1){
    		document.getElementById('frmEditarPeriodoAcademico:btnGenerarNuevoPeriodoAcademicoValidarModal').click();
        }
    	if(varError.value == 2){
    		document.getElementById('frmEditarPeriodoAcademico:btnEditarPeriodoAcademicoValidarModal').click();
        }
    } 
    function nobackbutton(){
   		window.location.hash="no-back-button";
   		window.location.hash="Again-No-back-button" //chrome
   		window.onhashchange=function(){window.location.hash="no-back-button";}
	}
    
 //]]> 
</script>

	<h:form id="frmEditarPeriodoAcademico" enctype="multipart/form-data" acceptcharset="UTF-8">
	
		<p:panel id="pnlDatos" header="Información de Período Académico" >
			<!-- ******************** TABLA RESPONSIVA ************************ -->
			<div class="grid condensed">
				<!-- ******************** FILA NUMERO 1 ************************ -->
		         <div class="row cells8">
		       		<div class="cell colspan3" >
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblDescripcion" for="txtDescripcion" value="Período:"/>
		       				</ui:define>
		       				<ui:define name="valor">	
								<p:inputMask mask="9999-9999" id="txtDescripcion" value="#{administracionPeriodoAcademicoForm.apafPeriodoAcademicoEditar.pracDescripcion}"
										required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" style="width: 100%;">
										<p:ajax event="blur" update="lblDescripcion , txtDescripcion , msgDescripcion " />
								</p:inputMask>
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
								<p:message id="msgDescripcion" for="txtDescripcion" />
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		    	
		    	<!-- ******************** FILA NUMERO 2 ************************ -->
		         <div class="row cells8">
		     		<div class="cell colspan3" >
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblEstado" for="slcEstado" value="Estado:" />	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<h:selectOneMenu id="slcEstado" value="#{administracionPeriodoAcademicoForm.apafPeriodoAcademicoEditar.pracEstado}" 
		       								required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"
		       								style="width:100%"> 
		       						<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}" 
		       									  itemValue="#{generalesConstantesForm.appIdBase}"/> 
									<f:selectItems  var="item" value="#{listasCombosForm.listaEstadoPeriodoAcademico}" 
												  itemLabel="#{item.label}" itemValue="#{item.value}" />
								</h:selectOneMenu>	
		       				</ui:define>
		       				<ui:define name="etiquetaError">
									<p:message id="msgEstado" for="slcEstado" />
							</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		    	
		    	<!-- ******************** FILA NUMERO 3 ************************ -->
		    	<div class="row cells8">
					<div class="cell colspan3"><!-- FECHA INICIO -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFechaInicio" for="txtFechaInicio" value="Fecha de inicio: (dd/mm/aaaa)"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:calendar id="txtFechaInicio" value="#{administracionPeriodoAcademicoForm.apafPeriodoAcademicoEditar.pracFechaIncio}"
											maxdate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
											required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" 
											validator="fechaCreacionMallaCurricularValidador" converterMessage="La fecha ingresada no es válida. (dd-mm-aaaa) Ejemplo: 01-06-2016" >
											<p:ajax event="blur" update=" lblFechaInicio , msgFechaInicio ,  txtFechaInicio" />
								</p:calendar>
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgFechaInicio" for="txtFechaInicio"/>	
		       				</ui:define>
		       			</ui:decorate>
					</div>
					<div class="cell colspan3"><!-- FECHA FIN  -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFechaFin" for="txtFechaFin" value="Fecha de finalización: (dd/mm/aaaa)"/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:calendar id="txtFechaFin" value="#{administracionPeriodoAcademicoForm.apafPeriodoAcademicoEditar.pracFechaFin}"
											navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
											required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" 
											validator="fechaCreacionMallaCurricularValidador" converterMessage="La fecha ingresada no es válida. (dd-mm-aaaa) Ejemplo: 01-06-2016" >
											<p:ajax event="blur" update=" lblFechaFin , msgFechaFin ,  txtFechaFin" />
								</p:calendar>
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgFechaFin" for="txtFechaFin"/>	
		       				</ui:define>
		       			</ui:decorate>
					</div>
				</div>
		    	
		    	
		    </div>
		</p:panel>
		<p:panel id="pnlCronogramaNivelacion" rendered="#{administracionPeriodoAcademicoForm.apafHabilitarCronograma}"
		header="Fechas de cronograma para nivelación" >
			<p:dataTable id="dtsCronogramaNivelacion" var="item" value="#{administracionPeriodoAcademicoForm.apafListPeriodoAcademicoGuardarNivelacion}"
		    		 		rows="50" paginator="true"
		                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		                         rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON DATOS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS">
				        <p:column headerText="Numeral" style="width: 15%; text-align:center;">
				            <h:outputText value="#{item.prflId}"/>
				        </p:column>
				        <p:column headerText="Descripción" style="width: 15%; text-align:center;">
				            <h:outputText value="#{item.prflDescripcion}"/>
				        </p:column>
				        <p:column headerText="Fecha de inicio" style="width: 15%; text-align:center;">
				        <p:inputMask mask="99/99/9999"  value="#{item.plcrFechaInicio}" style="width: 50%; text-align:center;"/>
				        </p:column>
				        <p:column headerText="Fecha de finalización" style="width: 15%; text-align:center;">
				        <p:inputMask mask="99/99/9999" value="#{item.plcrFechaFin}" style="width: 50%; text-align:center;"/>
				        </p:column>
			</p:dataTable>
		</p:panel>
		<p:panel id="pnlCronograma" rendered="#{administracionPeriodoAcademicoForm.apafHabilitarCronograma}"
		header="Fechas de cronograma para grado" >
			<p:dataTable id="dtsCronograma" var="item" value="#{administracionPeriodoAcademicoForm.apafListPeriodoAcademicoGuardar}"
		    		 		rows="50" paginator="true"
		                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		                         rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON DATOS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS">
				        <p:column headerText="Numeral" style="width: 15%; text-align:center;">
				            <h:outputText value="#{item.prflId}"/>
				        </p:column>
				        <p:column headerText="Descripción" style="width: 15%; text-align:center;">
				            <h:outputText value="#{item.prflDescripcion}"/>
				        </p:column>
				        <p:column headerText="Fecha de inicio" style="width: 15%; text-align:center;">
				        <p:inputMask mask="99/99/9999"  value="#{item.plcrFechaInicio}" style="width: 50%; text-align:center;"/>
				        </p:column>
				        <p:column headerText="Fecha de finalización" style="width: 15%; text-align:center;">
				        <p:inputMask mask="99/99/9999" value="#{item.plcrFechaFin}" style="width: 50%; text-align:center;"/>
				        </p:column>
			</p:dataTable>
		</p:panel>
		<div >
		<p:commandButton id="btnCancelar" action="#{administracionPeriodoAcademicoForm.cancelar()}" value="Cancelar" immediate="true" />
		
		<p:commandButton id="btnGuardarNuevoPeriodoAcademico" value="#{administracionPeriodoAcademicoForm.apafHabilitarCronograma?'Guardar Nuevo':'Agregar cronograma'}" action="#{administracionPeriodoAcademicoForm.verificarClickNuevoPeriodoAcademico()}" ajax="false"
						rendered="#{administracionPeriodoAcademicoForm.apafPaginacionSt == 'Nuevo'}" update="pnlCronograma , pnlCronogramaNivelacion , growl"/>
		<p:commandButton id="btnEditarPeriodoAcademico" value="Guardar cambios" action="#{administracionPeriodoAcademicoForm.verificarClickEditarPeriodoAcademico()}" ajax="false"
						rendered="#{administracionPeriodoAcademicoForm.apafPaginacionSt == 'Editar'}"	/>
						
		<p:commandButton id="btnGenerarNuevoPeriodoAcademicoValidarModal" value="EjecutarModalNuevoPeriodoAcademico" style="visibility:hidden;">
    				<p:ajax oncomplete="PF('dialogoGuardarNuevo').show();" update=":frmModalGuardarNuevo" />
    	</p:commandButton>
		<p:commandButton id="btnEditarPeriodoAcademicoValidarModal" value="EjecutarModalEditarPeriodoAcademico" style="visibility:hidden;">
    				<p:ajax oncomplete="PF('dialogoEditar').show();" update=":frmModalEditar" />
    	</p:commandButton>
	
		</div>
	</h:form>
	
	<ui:include src="/academico/administracionAcademico/periodoAcademico/modalGuardarNuevo.xhtml" />
	<ui:include src="/academico/administracionAcademico/periodoAcademico/modalEditar.xhtml" />
	
	<h:form id="compOculto" style="visibility:hidden;">
	 	<p:inputText id="txtValidador" value="#{administracionPeriodoAcademicoForm.apafValidadorClick}" >
		</p:inputText>	
	</h:form>
</ui:define>
</ui:composition>     
</html>
