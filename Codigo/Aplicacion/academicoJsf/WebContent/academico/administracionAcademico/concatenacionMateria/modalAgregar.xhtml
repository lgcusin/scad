<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">


	<h:form id="frmModalAgregar">

		<p:dialog widgetVar="dialogoAgregar" modal="true" draggable="false"
			closable="false" resizable="false" height="480" width="780"
			styleClass="modal-sin-header">
			<p:outputLabel 
				value="#{concatenacionMateriaForm.cmfTipoMateria==0 ? 'Asignar prerrequisitos' : 'Asignar correquisito'}"
				style="font-size: 1.1em !important;" />

			<p:panel id="pnlBusqueda" header="Ingrese los datos para buscar">
				<!-- ******************** TABLA RESPONSIVA ************************ -->
				<div class="grid condensed">
					<!-- ******************** FILA NUMERO 1 ************************ -->
					<div class="row cells8">
						<div class="cell colspan5">
							<ui:decorate
								template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
								<ui:define name="etiqueta">
									<p:outputLabel id="lblDescripcion" for="txtDescripcion" value="Descripción:" />
								</ui:define>
								<ui:define name="valor">
									<p:inputText id="txtDescripcion" value="#{concatenacionMateriaForm.cmfPatronBusqueda}" style="width:100%;"/>
								</ui:define>
							</ui:decorate>
						</div>
					</div>
				</div>
			</p:panel>

			<div>
				<p:commandButton 
					id="btnBuscar" 
					value="Buscar"
					action="#{concatenacionMateriaForm.cargarMateriasModal(concatenacionMateriaForm.cmfPatronBusqueda)}"
					update=":frmModalAgregar:pnlResultados , :frmModalAgregar:pnlBusqueda" />

				<p:commandButton 
					id="btnLimpiar" 
					value="Limpiar"
					action="#{concatenacionMateriaForm.limpiarModalAgregar()}"
					update=":frmModalAgregar:pnlResultados , :frmModalAgregar:pnlBusqueda" />
			</div>
			
			<p:panel id="pnlResultados" header="Resultados de la búsqueda">

				<p:dataTable 
					id="dtsFuncion" 
					var="item"
					value="#{concatenacionMateriaForm.cmfTipoMateria==0 ? concatenacionMateriaForm.cmfListBuscarPrerrequisito : concatenacionMateriaForm.cmfListBuscarCorrequisito}"
					rows="10" paginator="true"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					rowsPerPageTemplate="5,10,15"
					emptyMessage="NO SE ENCONTRARON MATERIAS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS"
					paginatorPosition="bottom">

					<p:column headerText="Descripción" style="width: 85%;">
						<h:outputText value="#{item.mtrDescripcion}" />
					</p:column>

					<p:column headerText="Opción"
						style="width: 15%; text-align:center;">
						<p:commandLink 
							value="Agregar"
							action="#{concatenacionMateriaForm.agregarMateriaDto(item)}"
							onclick="PF('dialogoTrabajando').show();" 
							oncomplete="PF('dialogoAgregar').hide();" 
							ajax="false"
							style="color:blue;" />
					</p:column>
				</p:dataTable>
			</p:panel>

			<div>
				<p:commandButton 
					id="btnCerrarModal" 
					value="Regresar"
					action="#{concatenacionMateriaForm.regresarModal()}"
					update=":frmConcatenarMateria:pnlPrerequisitos"
					oncomplete="PF('dialogoAgregar').hide();" />
			</div>
		</p:dialog>
	</h:form>
</ui:composition>
