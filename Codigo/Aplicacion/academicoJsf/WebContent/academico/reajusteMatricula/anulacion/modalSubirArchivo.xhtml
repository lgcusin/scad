<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      			xmlns:ui="http://java.sun.com/jsf/facelets"
      			xmlns:f="http://java.sun.com/jsf/core"
      			xmlns:h="http://java.sun.com/jsf/html"
     			xmlns:p="http://primefaces.org/ui">
	<h:form id="frmModalSubirArchivo">  
		<p:dialog widgetVar="dialogoModalSubirArchivo" modal="true" draggable="false" closable="false" 
				  resizable="false" height="800" width="1000" styleClass="modal-sin-header" >
			<p:outputLabel 
				value="Subir resolución"
				style="font-size: 1.1em !important;" />
				
            <p:messages for="mensaje" autoUpdate="true" globalOnly="true" />
					
			<p:panel id="pnlResultados" header="Resultados de la búsqueda">
	
	<div > <!--Sin class="grid condensed" -->
				<!-- ******************** FILA NUMERO 1 ************************ -->
				<div class="row cells8"> 
						    <div class="cell colspan4"><!--Dependencia de la materia -->
						 <ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralDisplayAlterna.xhtml" >
							<ui:define name="etiqueta">
								<p:outputLabel id="lblCodigoMateria" for="codigoMateria" value="Código: " />
							</ui:define>
							<ui:define name="valor">
								<p:outputLabel id="codigoMateria" value="#{anulacionMatriculaForm.amfAsignaturaSeleccionada.mtrCodigo}" 
												style="vertical-align: super;font-weight: Normal !important; width:100%" update ="codigoMateria"/>
							</ui:define>
						 </ui:decorate>
					   </div>
						
				</div> <!-- Fin fila 1 -->
			
				<!-- ******************** FILA NUMERO 2 ************************ -->
				<div class="row cells8"> 
						
						<div class="cell colspan4" > <!--carrera de la materia -->
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralDisplayAlterna.xhtml">
							<ui:define name="etiqueta">
								<p:outputLabel id="lblMateria" for="materia" value="Asignatura: " />
							</ui:define>
							<ui:define name="valor">
								<p:outputLabel id="materia" value="#{anulacionMatriculaForm.amfAsignaturaSeleccionada.mtrDescripcion}" 
												style="vertical-align: super;font-weight: Normal !important; width:98%" update ="materia"/>
							</ui:define>
						</ui:decorate>
					    </div>
				</div> <!-- Fin fila 2 -->
				
					<div class="row cells8"> 
						<div class="cell colspan4" ><!--  Estado de la materia a editar-->
								<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
									<ui:define name="etiqueta">
										<p:outputLabel id="lblTipoAnulacion" for="slcTipoAnulacion" value="Tipo anulación: " />
									</ui:define>
									<ui:define name="valor">
										<h:selectOneMenu id="slcTipoAnulacion" value="#{anulacionMatriculaForm.amfAsignaturaSeleccionada.dtmtTipoAnulacion}" 
										                style="width: 100%;" required="true"
										                requiredMessage="#{generalesConstantesForm.msgCampoRequerido}">		
											<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}"
											              itemValue="#{generalesConstantesForm.appIdBase}" />
										  	<f:selectItems value="#{listasCombosForm.listaTipoAnulacion}" var="item"
													itemLabel="#{item.label}" itemValue="#{item.value}" />  
											<p:ajax event="change" 
											    listener="#{anulacionMatriculaForm.habilitarCausales(anulacionMatriculaForm.amfAsignaturaSeleccionada.dtmtTipoAnulacion)}"
											 update=":frmModalSubirArchivo:pnlCausales , lblTipoAnulacion,slcTipoAnulacion, msgTipoAnulacion" />
										</h:selectOneMenu>
									</ui:define>
									<ui:define name="etiquetaError">
										<p:message id="msgTipoAnulacion" for="slcTipoAnulacion" />
									</ui:define>
							    </ui:decorate>
						    </div>
				</div> <!-- Fin fila 3 -->
				
					<!-- ******************** FILA NUMERO 4 ************************ -->
 				<div class="row cells8">
						<div class="cell colspan4">
							<ui:decorate
								template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
								<ui:define name="etiqueta">
									<p:outputLabel id="lblArchivo" for="txtArchivo"
										value="Seleccione el archivo que contiene la resolución del Consejo Directivo " />
								</ui:define>
								<ui:define name="valor">
									<p:outputLabel id="txtArchivo"
										value="#{anulacionMatriculaForm.amfNombreArchivoAuxiliar}"
										style="font-weight: Normal !important;">
									</p:outputLabel>
									<p:fileUpload id="flupArchivoSubir"
										fileUploadListener="#{anulacionMatriculaForm.handleFileUpload}"
										auto="true" sizeLimit="1048576" allowTypes="/(\.|\/)(pdf)$/"
										update="txtArchivo" cancelLabel="Cancelar"
										fileLimitMessage="Ya ha seleccionado un archivo"
										invalidSizeMessage="Tamaño de archivo excedido! máximo 1mb"
										label="Buscar"
										invalidFileMessage="Tipo de archivo no válido! solo formato pdf"
										uploadLabel="Cargar"
										requiredMessage="Campo requerido">
									</p:fileUpload>
									
								</ui:define>
							</ui:decorate>
						</div>
					</div>	  	  <!-- Fin fila 4 --> 
 					  	
			 </div>  <!-- Fin Grid Condensed --> 
		</p:panel>
       
       	<p:panel id="pnlCausales" header="Causales para la anulación de la matrícula">
				    
			<p:dataTable id="dtsCausales" var="item" value="#{anulacionMatriculaForm.amfListCausalAnulacion}"
		   		 		rows="20" paginator="false" paginatorPosition="bottom"
	                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
	                         rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON REGISTROS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS"
	                          style="text-align: center;">
	     
			        <p:column headerText="Seleccionado"  style="width: 5em  ! important; "  rendered= "#{anulacionMatriculaForm.amfRenderSelectCausales}">
						
						<h:selectBooleanCheckbox value="#{item.seleccionado}" />
					</p:column>
					
			        <p:column headerText="Código" style="width: 4em  ! important; text-align: left; ">
			            <h:outputText value="#{item.cslCodigo}"/>
			        </p:column>
	                <p:column headerText="Causal" style="width: 15em  ! important; text-align: left; ">
			            <h:outputText value="#{item.cslDescripcion}"/>
			        </p:column>
			     
					
				</p:dataTable>
		</p:panel>
       
       
     <div class="row cells8">
      
                 <p:commandButton 
					id="btnCerrarModal" 
					value="Cerrar"
					action="#{anulacionMatriculaForm.CancelarSubirArchivo()}"
					oncomplete="PF('dialogoModalSubirArchivo').hide();" 
					update=":frmVerAsignatura, :frmVerAsignatura:dtsMaterias"	  />
					
				<p:commandButton 
					id="btnGuardarSubirArchivo" 
					value="Subir información"
					disabled="#{anulacionMatriculaForm.amfDesactivaBotonSubirInfo}"
					action="#{anulacionMatriculaForm.guardarSubirInformacion(anulacionMatriculaForm.amfAsignaturaSeleccionada, anulacionMatriculaForm.amfListCausalAnulacion)}"
					update=":frmVerAsignatura, btnGuardarSubirArchivo"
				/>
		
			
		</div>
			
		</p:dialog> 
	</h:form>
</ui:composition>