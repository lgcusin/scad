package ec.edu.uce.Biometrico.jsf.managedBeans;

import java.util.Date;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;

import ec.edu.uce.Biometrico.ejb.servicios.interfaces.SrvEmpleadoLocal;
import ec.uce.edu.biometrico.jpa.Carrera;
import ec.uce.edu.biometrico.jpa.FichaDocente;

@ManagedBean(name = "generarRegistros")
@ViewScoped
public class generarRegistros {

	@EJB
	private SrvEmpleadoLocal srvEmp;
	private Login beanLogin;

	private Carrera selectCarrera;
	private FichaDocente selectDocente;
	private List<Carrera> lstCarrera;
	private List<FichaDocente> lstDocente;
	private Date fecha;
	private Integer hhI;
	private Integer mmI;
	private Integer hhF;
	private Integer mmF;

	@PostConstruct
	public void init() {
		FacesContext context = FacesContext.getCurrentInstance();
		beanLogin = context.getApplication().evaluateExpressionGet(context, "#{login}", Login.class);
		lstCarrera = srvEmp.listarCarreras(beanLogin.getUsuarioRol().getUsuario().getPersona().getFichaEmpleados()
				.get(0).getDetallePuestos().get(0).getCarrera().getDependencia().getDpnId());
		iniciarBean();
	}

	private void iniciarBean() {
		selectCarrera = new Carrera();
		selectDocente = new FichaDocente();
	}

	public void setFacultadID(ValueChangeEvent event) {
		if (event.getNewValue() != null) {
			selectCarrera.setCrrId((Integer) event.getNewValue());
		} else {
			selectCarrera.setCrrId(null);
			FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_WARN, "No se ha seleccionado una carrera.",
					"Warning!");
			FacesContext.getCurrentInstance().addMessage(null, msg);
		}
	}
	
	public void buscarHorariosDiarios(){
		
	}

	// GETTERS AND SETTERS

	/**
	 * @return the selectCarrera
	 */
	public Carrera getSelectCarrera() {
		return selectCarrera;
	}

	/**
	 * @param selectCarrera
	 *            the selectCarrera to set
	 */
	public void setSelectCarrera(Carrera selectCarrera) {
		this.selectCarrera = selectCarrera;
	}

	/**
	 * @return the lstCarrera
	 */
	public List<Carrera> getLstCarrera() {
		return lstCarrera;
	}

	/**
	 * @param lstCarrera
	 *            the lstCarrera to set
	 */
	public void setLstCarrera(List<Carrera> lstCarrera) {
		this.lstCarrera = lstCarrera;
	}

	/**
	 * @return the fecha
	 */
	public Date getFecha() {
		return fecha;
	}

	/**
	 * @param fecha
	 *            the fecha to set
	 */
	public void setFecha(Date fecha) {
		this.fecha = fecha;
	}

	/**
	 * @return the hhI
	 */
	public Integer getHhI() {
		return hhI;
	}

	/**
	 * @param hhI
	 *            the hhI to set
	 */
	public void setHhI(Integer hhI) {
		this.hhI = hhI;
	}

	/**
	 * @return the mmI
	 */
	public Integer getMmI() {
		return mmI;
	}

	/**
	 * @param mmI
	 *            the mmI to set
	 */
	public void setMmI(Integer mmI) {
		this.mmI = mmI;
	}

	/**
	 * @return the hhF
	 */
	public Integer getHhF() {
		return hhF;
	}

	/**
	 * @param hhF
	 *            the hhF to set
	 */
	public void setHhF(Integer hhF) {
		this.hhF = hhF;
	}

	/**
	 * @return the mmF
	 */
	public Integer getMmF() {
		return mmF;
	}

	/**
	 * @param mmF
	 *            the mmF to set
	 */
	public void setMmF(Integer mmF) {
		this.mmF = mmF;
	}

}
