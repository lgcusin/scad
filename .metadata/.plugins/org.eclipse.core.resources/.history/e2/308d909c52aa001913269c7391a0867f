<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<ui:composition
	template="/componentesGenerales/plantillas/pltPrincipalSinMenu.xhtml">
	<ui:define name="cuerpo">
		<h:form id="frmHuellas" enctype="multipart/form-data"
			acceptcharset="UTF-8">
			<br />
			<br />
			<p
				style="margin-left: 50px; color: rgb(0, 118, 189); font-size: 16px !important; font-weight: bold">Sistema
				de Control de Asistencia Docente (S.C.A.D.)</p>
			<h3></h3>
			<br />
			<br />
			<center>
				<p:panel id="pnlReloj">
					<h:outputLabel id="lblReloj" value="#{control.hora}"
						style="text-align: center; font-size: 20px !important; font-weight: bold"></h:outputLabel>
					<p:poll interval="1" listener="#{control.temporizador}"
						update="lblReloj "></p:poll>
					<p:commandButton id="btnDialog" value="Ver" title="Ver Dialogo"
						action="#{control.detectar()}"
						update=":frmHuellas:otpnControl :frmHuellas:otpnAsistencia"
						oncomplete="handleDialogRequest(args)">
					</p:commandButton>
				</p:panel>
				<!-- <p:commandButton value="Inicia sistema"
					title="Genera registros y inicia el control "
					rendered="#{control.generado}" action="#{control.generar()}"
					update="pnlReloj">

				</p:commandButton> -->
			</center>
			<br />
			<br />
			<p:panel style="margin-left: 25px; margin-right: 25px;">
				<h:panelGrid columns="3">
					<h:graphicImage value="/img/uce.png" alt="U.C.E"
						style=" width : 180px; height : 180px;" />
					<div>
						<p>
							<br /> <br />La Universidad Central del Ecuador, le da una
							cordial bienvenida al control de asistencia docente. Le
							comunicamos que toda información será sujeta a verificación,
							nuestra Institución de Educación Superior se reserva el derecho
							de verificar la información proporcionada.<br /> <br /> <br />
						</p>
					</div>
				</h:panelGrid>
			</p:panel>
			<p:commandButton value="Regresar" action="principal.xhtml" />
			<!-- DIALOGO PARA EL CONTROL DE ACTIVIDADES -->
			<p:dialog id="dlgControl"
				header="Registro de  asistencia y actividades curriculares"
				widgetVar="dlgCntrl" modal="true" showEffect="fade"
				hideEffect="fade" style="margin-left: 100px; margin-right: 100px;"
				position="center" resizable="false">
				<p:outputPanel id="otpnControl">
					<p:panel id="pnlDatosDocente">
						<p:panelGrid columns="2" style="width:99%">
							<h:outputLabel value="Docente:"></h:outputLabel>
							<h:outputText
								value="#{control.regDcnt.persona.prsPrimerApellido} #{control.regDcnt.persona.prsSegundoApellido} #{control.regDcnt.persona.prsNombres}"></h:outputText>
							<h:outputLabel value="Materia"></h:outputLabel>
							<h:outputText rendered="#{control.flagIni}"
								value="#{control.hrrI.mallaCurricularParalelo.mallaCurricularMateria.materia.mtrDescripcion}"></h:outputText>
							<h:outputText rendered="#{control.flagFin}"
								value="#{control.hrrF.mallaCurricularParalelo.mallaCurricularMateria.materia.mtrDescripcion}"></h:outputText>
							<h:outputLabel value="Aula"></h:outputLabel>
							<h:outputText rendered="#{control.flagIni}"
								value="#{control.hrrI.horaClaseAula.aula.alaDescripcion}" />
							<h:outputText rendered="#{control.flagFin}"
								value="#{control.hrrF.horaClaseAula.aula.alaDescripcion}" />
							<h:outputLabel value="Hora:" />
							<h:outputLabel value="#{control.horaClase}" />
						</p:panelGrid>
					</p:panel>
					<p:panel id="pnlActividades">
						<h:outputLabel value="Actividades(Selecione una):"></h:outputLabel>
						<p:selectManyMenu id="slmmContenido" value="#{control.selecCnts}"
							var="Cnt" showCheckbox="true"
							style=" margin-right: 5px;width: 99%; width:100%">
							<f:selectItems value="#{control.lstCnt}" var="cn"
								itemLabel="#{cn.cncrDescripcion}"
								itemValue="#{cn.cncrDescripcion}"></f:selectItems>
							<p:column style="width:99%" headerText="TEMA DE CLASE">
								<h:outputText value="#{Cnt}" />
								<h:selectBooleanCheckbox value="#{control.sgmObservacion}">
									<f:selectItem itemValue="PENDIENTE" itemLabel="P" />
									<!-- <f:selectItem itemValue="COMPLETADO" itemLabel="C" /> -->
								</h:selectBooleanCheckbox>
							</p:column>
						</p:selectManyMenu>
						<h:outputLabel value="Observacion:"></h:outputLabel>
						<p:inputTextarea counter="display" title="Ingrese la observacion"
							value="#{control.sgmObservacion}" maxlength="300"
							counterTemplate="{0} caracteres restantes"
							style="margin-right: 5px;width: 99%; width:100%" />
						<h:outputLabel id="display" />
					</p:panel>
					<p:panel id="Resutado">
						<center>
							<p:panelGrid columns="2">
								<h:outputLabel value="Horas clase:" />
								<h:outputLabel value="#{control.sgmHoraClaseRestante}" />
								<h:outputLabel value="Hora de Registro:" />
								<h:outputText value="#{control.regAss.assHoraEntrada}"
									rendered="#{control.flagIni}" />
								<h:outputText value="#{control.regAss.assHoraSalida}"
									rendered="#{control.flagFin}" />
								<h:outputLabel value="Estado de clase" />
								<h:outputText value="#{control.regAss.assEstado}" />
							</p:panelGrid>
						</center>
					</p:panel>
					<p:commandButton id="btnGuardar" value="GUARDAR"
						action="#{control.guardarAsistencia()}"
						oncomplete="handleDialogRequest(args)"></p:commandButton>
					<p:commandButton id="btnCancelar" value="CANCELAR"
						action="#{control.cleanClose()}"
						onclick="PF('dlgControl').hide();"></p:commandButton>
				</p:outputPanel>
			</p:dialog>
			<!-- DIALOG DE ASISTENCIAS FUERA DE RANGO -->
			<p:dialog id="dlgAsistencia"
				header="Registro de  asistencia y actividades curriculares"
				widgetVar="dlgHrr" modal="true" showEffect="fade" hideEffect="fade"
				style="margin-left: 100px; margin-right: 100px;" position="center"
				resizable="false">
				<p:outputPanel id="otpnAsistencia">
					<p:panel>
						<p:dataTable id="tblAsistencia" value="#{control.lstAss}" var="As">
							<p:column id="clmFecha" headerText="FECHA">
								<h:outputText value="#{As.assFecha}" />
							</p:column>
							<p:column id="clmMateria" headerText="MATERIA">
								<h:outputText
									value="#{As.horarioAcademico.mallaCurricularParalelo.mallaCurricularMateria.materia.mtrDescripcion}" />
							</p:column>
							<p:column id="clmEntrada" headerText="HORA ENTRADA">
								<h:outputText value="#{As.assHoraEntrada}" />
							</p:column>
							<p:column id="clmSalida" headerText="HORA SALIDA">
								<h:outputText value="#{As.assHoraSalida}" />
							</p:column>
						</p:dataTable>
					</p:panel>
					<p:commandButton id="btnAceptar" value="ACEPTAR"
						action="#{control.cleanClose()}" onclick="PF('dlgHrr').hide();"></p:commandButton>
				</p:outputPanel>
			</p:dialog>
		</h:form>
		<script type="text/javascript">
			function handleDialogRequest(args) {
				if (args.flagHrr) {
					PF('dlgHrr').show();
				} else if (!args.flagHrr) {
					PF('dlgHrr').hide();
				}
				if (args.flagDlg) {
					PF('dlgCntrl').show();
				} else if (!args.flagDlg) {
					PF('dlgCntrl').hide();
				}

			}
		</script>
	</ui:define>
</ui:composition>
</html>
